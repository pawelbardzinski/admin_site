<div ng-include src="'templates/shared/notifications.html'"></div>
<div ng-show="user.currentUser">
  <div class="row margin-top">
    <table id="users_table" ng-show="usersFetched  == true">
      <thead>
        <tr>
          <th>Id</th>
          <th>Name</th>
          <th>Role name</th>
          <th>Facility id</th>
          <th>Created At</th>
          <th>Updated At</th>
          <th ng-show="isAdmin()">Update Role</th>
          <th ng-show="isAdmin()">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="user in users">
          <td>{{user.id}}</td>
          <td>{{user.attributes.username}}</td>
          <td>{{getRoleName(user)}}</td>
          <td>{{user.attributes.facility.id}}</td>
          <td>{{user.createdAt | date:'yyyy-MM-dd HH:mm:ss Z'}}</td>
          <td>{{user.updatedAt | date:'yyyy-MM-dd HH:mm:ss Z'}}</td>
          <td ng-show="isAdmin()"> Comming soon </td>
          <!-- <td>{{roles[1].attributes.name}}</td> -->
          <td class="no-bottom-margin" ng-show="{{isAdmin() && getRoleName(user) != 'Admin'}}">
            <button ng-confirm-click="You are about to destroy user! Are you SURE of this?" ng-click="destroyUser(user)" class="alert small-button">Delete User</button>
            <button ng-hide="user.inputForPasswordIsShow" ng-click="showInputForPassword(user)" class="info small-button">Update password</button>
            <form ng-show="user.inputForPasswordIsShow" ng-submit="updatePassword(user)" name="comment_form" novalidate>
              <input type="text" ng-hide="editUser.isHidePassword[user.id]" ng-model="editUser.password[user.id]" required class="form-control inline"></input>
              <input type="password" ng-show="editUser.isHidePassword[user.id]" ng-model="editUser.password[user.id]" required class="form-control inline"></input>
              <i tooltip-placement="right" tooltip="Click to show or hide password" ng-click="togglePassword(user.id)" class="fa fa-edit icon"></i>
              <button ng-show="user.inputForPasswordIsShow" class="success small-button">Click to update</button>
            </form>
          </td>
        </tr>
      </tbody>
    </table>
    <div ng-hide="usersFetched == true">
      Fetching data, please wait.
    </div>
    <div ng-show="usersFetched == 'error'">
      There was a problem with fetching data, please refresh your page.
    </div>
  </div>
</div>
