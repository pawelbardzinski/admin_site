<div ng-include src="'templates/shared/notifications.html'"></div>
<div>
  <div class="row margin-top">
    <table id="users_table" ng-show="usersFetched  == true">
      <thead>
        <tr>
          <th>Id</th>
          <th>Name</th>
          <th>Role name</th>
          <th>Facility id</th>
          <th>Created At</th>
          <th>Updated At</th>
          <th>Update Role</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="user in users">
          <td>{{user.id}}</td>
          <td>{{user.attributes.username}}</td>
          <td>{{getRoleName(user)}}</td>
          <td>{{user.attributes.facility.id}}</td>
          <td>{{user.createdAt | date:'yyyy-MM-dd HH:mm:ss Z'}}</td>
          <td>{{user.updatedAt | date:'yyyy-MM-dd HH:mm:ss Z'}}</td>
          <td> Comming soon </td>
          <!-- <td>{{roles[1].attributes.name}}</td> -->
          <td class="no-bottom-margin" ng-show="{{getRoleName(user) != 'Admin'}}">
            <button ng-confirm-click="Are you sure?" ng-click="destroyUser(user)" class="alert small-button">Delete User</button>
            <button class="info small-button">Update password (soon)</button>
          </td>
        </tr>
      </tbody>
    </table>
    <div ng-hide="usersFetched == true">
      Fetching data...
    </div>
    <div ng-show="usersFetched == 'error'">
      There was a problem with fetching data. Please refresh the page.
    </div>
  </div>
</div>
